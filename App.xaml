<!-- App.xaml - TRANSPARENT TEMA MED SVENSKA SPRÅK -->
<Application x:Class="FilKollen.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- MaterialDesign med mörkt tema som standard -->
                <materialDesign:BundledTheme x:Name="AppTheme"
                                             BaseTheme="Dark"
                                             PrimaryColor="DeepPurple"
                                             SecondaryColor="Cyan"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>

            <!-- TRANSPARENTA FÄRGER FÖR GLASSMORFISM -->
            <SolidColorBrush x:Key="TransparentAccent"
                    Color="#8800d4aa"
                    Opacity="0.8"/>
            <SolidColorBrush x:Key="TransparentPrimary"
                    Color="#88667eea"
                    Opacity="0.8"/>
            <SolidColorBrush x:Key="TransparentDanger"
                    Color="#88ff4757"
                    Opacity="0.8"/>
            <SolidColorBrush x:Key="TransparentSuccess"
                    Color="#8800ff88"
                    Opacity="0.8"/>

            <!-- DYNAMISKA TEMA-FÄRGER -->
            <SolidColorBrush x:Key="DynamicBackground"
                    Color="{DynamicResource AppBackgroundColor}"/>
            <SolidColorBrush x:Key="DynamicSurface"
                    Color="{DynamicResource AppSurfaceColor}"/>
            <SolidColorBrush x:Key="DynamicCard"
                    Color="{DynamicResource AppCardColor}"/>
            <SolidColorBrush x:Key="DynamicText"
                    Color="{DynamicResource AppTextColor}"/>
            <SolidColorBrush x:Key="DynamicTextSecondary"
                    Color="{DynamicResource AppTextSecondaryColor}"/>

            <!-- DEFAULT MÖRKA FÄRGER -->
            <Color x:Key="AppBackgroundColor">#0a0a0a</Color>
            <Color x:Key="AppSurfaceColor">#40161629</Color>
            <Color x:Key="AppCardColor">#601a1a35</Color>
            <Color x:Key="AppTextColor">#ffffff</Color>
            <Color x:Key="AppTextSecondaryColor">#b8c6db</Color>

            <!-- TRANSPARENT GLASS GRADIENTS -->
            <LinearGradientBrush x:Key="GlassMorphGradient"
                    StartPoint="0,0"
                    EndPoint="1,1">
                <GradientStop Color="#20ffffff"
                        Offset="0"/>
                <GradientStop Color="#10ffffff"
                        Offset="0.5"/>
                <GradientStop Color="#05ffffff"
                        Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="GlassMorphBorder"
                    StartPoint="0,0"
                    EndPoint="1,1">
                <GradientStop Color="#4000d4aa"
                        Offset="0"/>
                <GradientStop Color="#20667eea"
                        Offset="1"/>
            </LinearGradientBrush>

            <!-- GLASSMORFISM CARD STYLE -->
            <Style x:Key="GlassMorphCard"
                    TargetType="Border">
                <Setter Property="Background"
                        Value="{StaticResource GlassMorphGradient}"/>
                <Setter Property="BorderBrush"
                        Value="{StaticResource GlassMorphBorder}"/>
                <Setter Property="BorderThickness"
                        Value="1"/>
                <Setter Property="CornerRadius"
                        Value="16"/>
                <Setter Property="Padding"
                        Value="20"/>
                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect Color="#000000"
                                Direction="270"
                                ShadowDepth="8"
                                BlurRadius="20"
                                Opacity="0.3"/>
                    </Setter.Value>
                </Setter>
                <!-- Glassmorfism backdrop filter simulation -->
                <Setter Property="OpacityMask">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0"
                                EndPoint="1,1">
                            <GradientStop Color="#F0ffffff"
                                    Offset="0"/>
                            <GradientStop Color="#E0ffffff"
                                    Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- TRANSPARENT BUTTON STYLES -->
            <Style x:Key="GlassButton"
                    TargetType="Button">
                <Setter Property="Background"
                        Value="{StaticResource GlassMorphGradient}"/>
                <Setter Property="Foreground"
                        Value="{DynamicResource DynamicText}"/>
                <Setter Property="BorderBrush"
                        Value="{StaticResource TransparentAccent}"/>
                <Setter Property="BorderThickness"
                        Value="1"/>
                <Setter Property="Padding"
                        Value="16,10"/>
                <Setter Property="FontWeight"
                        Value="SemiBold"/>
                <Setter Property="FontSize"
                        Value="13"/>
                <Setter Property="Cursor"
                        Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="12"
                                    Padding="{TemplateBinding Padding}">
                                <Border.Effect>
                                    <DropShadowEffect Color="#00d4aa"
                                            BlurRadius="12"
                                            ShadowDepth="0"
                                            Opacity="0.4"/>
                                </Border.Effect>
                                <ContentPresenter HorizontalAlignment="Center"
                                        VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver"
                                        Value="True">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <LinearGradientBrush StartPoint="0,0"
                                                    EndPoint="1,1">
                                                <GradientStop Color="#4000d4aa"
                                                        Offset="0"/>
                                                <GradientStop Color="#30667eea"
                                                        Offset="1"/>
                                            </LinearGradientBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <Trigger Property="IsPressed"
                                        Value="True">
                                    <Setter Property="RenderTransform">
                                        <Setter.Value>
                                            <ScaleTransform ScaleX="0.96"
                                                    ScaleY="0.96"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- DANGER GLASS BUTTON -->
            <Style x:Key="DangerGlassButton"
                    TargetType="Button"
                    BasedOn="{StaticResource GlassButton}">
                <Setter Property="BorderBrush"
                        Value="{StaticResource TransparentDanger}"/>
                <Setter Property="Foreground"
                        Value="#ff6b7d"/>
            </Style>

            <!-- TEMA-VÄXLARE (FÖRBÄTTRAT) -->
            <Style x:Key="ModernThemeToggle"
                    TargetType="ToggleButton">
                <Setter Property="Width"
                        Value="80"/>
                <Setter Property="Height"
                        Value="40"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ToggleButton">
                            <Grid>
                                <!-- Transparent Track -->
                                <Border Name="Track"
                                        Background="{StaticResource GlassMorphGradient}"
                                        CornerRadius="20"
                                        BorderThickness="2"
                                        BorderBrush="{StaticResource GlassMorphBorder}">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000"
                                                BlurRadius="10"
                                                ShadowDepth="2"
                                                Opacity="0.3"/>
                                    </Border.Effect>
                                </Border>

                                <!-- Theme Icons -->
                                <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="🌙"
                                            FontSize="14"
                                            Margin="6,0,2,0"
                                            Opacity="0.8"/>
                                    <TextBlock Text="☀️"
                                            FontSize="14"
                                            Margin="2,0,6,0"
                                            Opacity="0.8"/>
                                </StackPanel>

                                <!-- Animated Thumb -->
                                <Border Name="Thumb"
                                        Width="28"
                                        Height="28"
                                        CornerRadius="14"
                                        Background="{StaticResource TransparentAccent}"
                                        HorizontalAlignment="Left"
                                        Margin="6,6,0,6">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#00d4aa"
                                                BlurRadius="12"
                                                ShadowDepth="0"
                                                Opacity="0.8"/>
                                    </Border.Effect>
                                    <Border.RenderTransform>
                                        <TranslateTransform x:Name="ThumbTransform"/>
                                    </Border.RenderTransform>

                                    <!-- Thumb Icon -->
                                    <TextBlock Name="ThumbIcon"
                                            Text="🌙"
                                            FontSize="12"
                                               HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked"
                                        Value="True">
                                    <Setter TargetName="Track"
                                            Property="Background">
                                        <Setter.Value>
                                            <LinearGradientBrush StartPoint="0,0"
                                                    EndPoint="1,1">
                                                <GradientStop Color="#40fbbf24"
                                                        Offset="0"/>
                                                <GradientStop Color="#20f59e0b"
                                                        Offset="1"/>
                                            </LinearGradientBrush>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="Track"
                                            Property="BorderBrush"
                                            Value="#60fbbf24"/>
                                    <Setter TargetName="Thumb"
                                            Property="Background"
                                            Value="#fbbf24"/>
                                    <Setter TargetName="ThumbIcon"
                                            Property="Text"
                                            Value="☀️"/>
                                    <Trigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                                 Storyboard.TargetProperty="X"
                                                                 To="40"
                                                        Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.EnterActions>
                                    <Trigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                                 Storyboard.TargetProperty="X"
                                                                 To="0"
                                                        Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.ExitActions>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- PROTECTION TOGGLE -->
            <Style x:Key="ProtectionToggle"
                    TargetType="ToggleButton">
                <Setter Property="Width"
                        Value="120"/>
                <Setter Property="Height"
                        Value="50"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ToggleButton">
                            <Grid>
                                <Border Name="Track"
                                        Background="{StaticResource GlassMorphGradient}"
                                        CornerRadius="25"
                                        BorderThickness="2"
                                        BorderBrush="{StaticResource TransparentDanger}">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#ff4757"
                                                BlurRadius="15"
                                                ShadowDepth="0"
                                                Opacity="0.5"/>
                                    </Border.Effect>
                                </Border>

                                <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="🛡️"
                                            FontSize="16"
                                            Margin="8,0,4,0"
                                            Opacity="0.9"/>
                                    <TextBlock Name="StatusText"
                                            Text="AV"
                                            FontSize="12"
                                            FontWeight="Bold"
                                               Foreground="#ff6b7d"
                                            Margin="0,0,8,0"/>
                                </StackPanel>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked"
                                        Value="True">
                                    <Setter TargetName="Track"
                                            Property="BorderBrush"
                                            Value="{StaticResource TransparentSuccess}"/>
                                    <Setter TargetName="Track"
                                            Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect Color="#00ff88"
                                                    BlurRadius="15"
                                                    ShadowDepth="0"
                                                    Opacity="0.6"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="StatusText"
                                            Property="Text"
                                            Value="PÅ"/>
                                    <Setter TargetName="StatusText"
                                            Property="Foreground"
                                            Value="#00ff88"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- SUBTLE ANIMATIONS -->
            <Storyboard x:Key="PulseAnimation"
                    RepeatBehavior="Forever">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                    <EasingDoubleKeyFrame KeyTime="0:0:0"
                            Value="0.8"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:1"
                            Value="1.0"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:2"
                            Value="0.8"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>

            <Storyboard x:Key="FloatAnimation"
                    RepeatBehavior="Forever">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)">
                    <EasingDoubleKeyFrame KeyTime="0:0:0"
                            Value="0"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:2"
                            Value="-5"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:4"
                            Value="0"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>

        </ResourceDictionary>
    </Application.Resources>
</Application>